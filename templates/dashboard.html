<!-- FILE: templates/dashboard.html -->
{% extends "base.html" %}

{% block title %}Dashboard - FaceAuth Pro{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h1 class="card-title">
            <i class="fas fa-tachometer-alt"></i>
            Welcome, {{ user_name }}!
        </h1>
        <p class="card-subtitle">Your secure dashboard</p>
    </div>

    <div id="account-info" class="dashboard-grid">
        <!-- Account info will be loaded here -->
    </div>

    <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem; flex-wrap: wrap;">
        <button class="btn btn-primary" onclick="refreshAccountInfo()">
            <i class="fas fa-sync-alt"></i> Refresh Account
        </button>
        <button class="btn btn-secondary" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> Logout
        </button>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    async function loadAccountInfo() {
        try {
            const response = await fetch('/api/account-info');
            const result = await response.json();
            
            if (result.success) {
                document.getElementById('account-info').innerHTML = `
                    <div class="stat-card">
                        <div class="stat-value"><i class="fas fa-user"></i></div>
                        <div class="stat-label">${result.name}</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${result.account_number}</div>
                        <div class="stat-label">Account Number</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">$${result.balance}</div>
                        <div class="stat-label">Account Balance</div>
                    </div>
                `;
            }
        } catch (error) {
            showAlert('Failed to load account information', 'error');
        }
    }
    
    function refreshAccountInfo() {
        loadAccountInfo();
        showAlert('Account information refreshed', 'success');
    }
    
    // Load account info on page load
    document.addEventListener('DOMContentLoaded', loadAccountInfo);
</script>
{% endblock %}
